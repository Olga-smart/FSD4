(()=>{"use strict";class t{constructor(t={}){var e,i,s,n,a;this.min=null!==(e=t.min)&&void 0!==e?e:0,this.max=null!==(i=t.max)&&void 0!==i?i:150,this.leftValue=null!==(s=t.leftValue)&&void 0!==s?s:25,this.step=null!==(n=t.step)&&void 0!==n?n:1,t.range?(this.rightValue=null!==(a=t.rightValue)&&void 0!==a?a:75,this.isRange=!0):this.isRange=!1}setLeftValue(t){t<this.min?this.leftValue=this.min:(this.isRange||(this.leftValue=Math.min(t,this.max)),this.isRange&&(this.leftValue=Math.min(t,this.rightValue)))}setRightValue(t){t>this.max?this.rightValue=this.max:this.rightValue=Math.max(t,this.leftValue)}}function e(t,e){const i=document.createElement(t);return e&&(i.className=e),i}class i{constructor(){this.component=e("div","range-slider__slider")}append(...t){this.component.append(...t)}}class s{constructor(){this.view=null,this.component=e("div","range-slider__track"),this.attachEventHandlers()}registerWith(t){this.view=t}attachEventHandlers(){this.component.addEventListener("click",(t=>{var e;null===(e=this.view)||void 0===e||e.handleScaleClick(t.clientX,t.clientY)}))}}class n{constructor(){this.component=e("div","range-slider__range js-range-slider__range")}setLeftIndent(t){this.component.style.left=t+"%"}setRightIndent(t){this.component.style.right=t+"%"}}class a{constructor(t="left"){this.view=null,this.type=t,this.component=e("input",`range-slider__input range-slider__input_${t} js-range-slider__input_${t}`),this.component.type="range",this.attachEventHandlers()}registerWith(t){this.view=t}setMinValue(t){this.component.setAttribute("min",`${t}`)}setMaxValue(t){this.component.setAttribute("max",`${t}`)}setStep(t){this.component.setAttribute("step",`${t}`)}setValue(t){this.component.setAttribute("value",`${t}`)}setZIndex(t){this.component.style.zIndex=`${t}`}getValue(){return this.component.value}getMin(){return this.component.min}getMax(){return this.component.max}attachEventHandlers(){this.component.addEventListener("input",(()=>{var t,e;let i=this.component.value;"left"==this.type&&(null===(t=this.view)||void 0===t||t.handleLeftInput(+i)),"right"==this.type&&(null===(e=this.view)||void 0===e||e.handleRightInput(+i))})),this.component.addEventListener("mouseover",(()=>{var t;null===(t=this.view)||void 0===t||t.handleInputMouseover(this.type)})),this.component.addEventListener("mouseout",(()=>{var t;null===(t=this.view)||void 0===t||t.handleInputMouseout(this.type)})),this.component.addEventListener("mousedown",(()=>{var t;null===(t=this.view)||void 0===t||t.handleInputMousedown(this.type)})),this.component.addEventListener("mouseup",(()=>{var t;null===(t=this.view)||void 0===t||t.handleInputMouseup(this.type)}))}}class l{constructor(t="left"){this.type=t,this.component=e("div",`range-slider__thumb range-slider__thumb_${t} js-range-slider__thumb_${t}`)}addHover(){this.component.classList.add("range-slider__thumb_hover")}removeHover(){this.component.classList.remove("range-slider__thumb_hover")}makeActive(){this.component.classList.add("range-slider__thumb_active")}makeInactive(){this.component.classList.remove("range-slider__thumb_active")}setLeftIndent(t){this.component.style.left=t+"%"}setRightIndent(t){this.component.style.right=t+"%"}getLeftIndent(){return this.component.style.left}getRightIndent(){return this.component.style.right}getBoundingClientRect(){return this.component.getBoundingClientRect()}}class h{constructor(t="left"){this.type=t,this.component=document.createElement("div")}setOpacity(t){this.component.style.opacity=`${t}`}setValue(t){this.component.textContent=`${t}`}getBoundingClientRect(){return this.component.getBoundingClientRect()}}class o extends h{constructor(t="left"){super(t),this.component=e("div",`range-slider__min-max-label range-slider__min-max-label_${t} js-range-slider__min-max-label_${t}`)}fixPositionForVertical(){"left"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(-${this.component.offsetWidth}px)`),"right"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(${this.component.offsetHeight}px)`)}}class r extends h{constructor(t="left"){super(t),this.component=e("div",`range-slider__value-label range-slider__value-label_${t} js-range-slider__value-label_${t}`)}setLeftIndent(t){this.component.style.left=t}getLeftIndent(){return this.component.style.left}setRightIndent(t){this.component.style.right=t}getRightIndent(){return this.component.style.right}fixPositionForVertical(){"left"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(${this.component.offsetHeight}px) translateY(${this.component.offsetWidth}px) translateY(-50%)`),"right"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(${this.component.offsetHeight}px) translateY(-50%)`),"common"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(${this.component.offsetHeight}px) translateY(${this.component.offsetWidth}px) translateY(-50%)`)}}class u{constructor(t,i,s=4){this.view=null,this.component=e("div","range-slider__scale"),this.min=t,this.max=i,this.intervalsNumber=s,this.intervals=[],this.values=[],this.valueElements=[],this.createIntervals(),this.addMarksInIntervals(),this.addValues(),this.attachEventHandlers()}registerWith(t){this.view=t}createIntervals(){for(let t=0;t<this.intervalsNumber;t++)this.intervals[t]=e("div","range-slider__scale-interval"),this.component.append(this.intervals[t])}addMarksInIntervals(){this.intervals.forEach((t=>{let i=new DocumentFragment;this.intervalsNumber<29&&i.append(e("span","range-slider__scale-mark")),this.intervalsNumber<15&&i.append(e("span","range-slider__scale-mark")),this.intervalsNumber<8&&i.append(e("span","range-slider__scale-mark")),this.intervalsNumber<5&&i.append(e("span","range-slider__scale-mark")),t.append(i)}))}addValues(){this.values[0]=this.min;let t=Math.round((this.max-this.min)/this.intervalsNumber);for(let e=1;e<this.intervalsNumber;e++)this.values[e]=e*t+this.min;this.values.push(this.max);let i=e("span","range-slider__scale-interval-value range-slider__scale-interval-value_min");i.textContent=`${this.values[0]}`,this.intervals[0].append(i),this.valueElements.push(i);for(let t=1;t<this.values.length;t++){let i=e("span","range-slider__scale-interval-value range-slider__scale-interval-value");i.textContent=`${this.values[t]}`,this.intervals[t-1].append(i),this.valueElements.push(i)}}fixPositionForVertical(){this.valueElements[0].style.transform="rotate(90deg) translateY(-50%)";for(let t=1;t<this.valueElements.length;t++)this.valueElements[t].style.transform=`rotate(90deg) translateX(${this.valueElements[t].offsetWidth}px) translateY(${-this.valueElements[t].offsetHeight}px) translateY(50%)`}attachEventHandlers(){this.component.addEventListener("click",(t=>{var e;null===(e=this.view)||void 0===e||e.handleScaleClick(t.clientX,t.clientY)}))}}class m{constructor(t,e={}){var h;this.presenter=null,this.component=t,this.inputLeft=new a("left"),this.inputLeft.registerWith(this),this.slider=new i,this.track=new s,this.track.registerWith(this),this.range=new n,this.thumbLeft=new l("left"),this.slider.append(this.track.component,this.range.component,this.thumbLeft.component),this.component.append(this.slider.component,this.inputLeft.component),e.range?(this.inputRight=new a("right"),this.inputRight.registerWith(this),this.thumbRight=new l("right"),this.slider.append(this.thumbRight.component),this.component.append(this.inputRight.component),this.isRange=!0):(this.isRange=!1,this.range.setLeftIndent(0)),e.scale?(this.hasScale=!0,this.scaleIntervals=null!==(h=e.scaleIntervals)&&void 0!==h?h:4):this.hasScale=!1,e.minMaxLabels&&(this.minLabel=new o("left"),this.maxLabel=new o("right"),this.slider.append(this.minLabel.component,this.maxLabel.component)),e.valueLabel&&(this.valueLabelLeft=new r("left"),this.slider.append(this.valueLabelLeft.component),e.range&&(this.valueLabelRight=new r("right"),this.valueLabelCommon=new r("common"),this.slider.append(this.valueLabelRight.component,this.valueLabelCommon.component),setTimeout((()=>{this.isTwoValueLabelsClose()&&this.mergeLabels()})))),e.vertical&&(this.component.classList.add("range-slider_vertical"),this.vertical=!0,e.minMaxLabels&&setTimeout((()=>{this.fixMinMaxLabelsPositionForVertical()})),e.valueLabel&&setTimeout((()=>{this.fixValueLabelPositionForVertical()}))),e.minMaxLabels&&e.valueLabel&&(setTimeout((()=>{this.isLeftValueLabelCloseToMinLabel()&&this.minLabel.setOpacity(0)})),e.range&&setTimeout((()=>{this.isRightValueLabelCloseToMaxLabel()&&this.maxLabel.setOpacity(0)})))}registerWith(t){this.presenter=t}setMinValue(t){this.inputLeft.setMinValue(t),this.isRange&&this.inputRight.setMinValue(t),this.minLabel&&this.minLabel.setValue(t)}setMaxValue(t){this.inputLeft.setMaxValue(t),this.isRange&&this.inputRight.setMaxValue(t),this.maxLabel&&this.maxLabel.setValue(t)}setStep(t){this.inputLeft.setStep(t),this.isRange&&this.inputRight.setStep(t)}setLeftValue(t){var e,i,s;this.inputLeft.setValue(t),this.setThumbLeftPosition(t),this.valueLabelLeft&&(this.valueLabelLeft.setValue(t),this.valueLabelLeft.setLeftIndent(this.thumbLeft.getLeftIndent()),this.isRange&&(null===(e=this.valueLabelCommon)||void 0===e||e.setValue(t+" - "+this.inputRight.getValue()),this.isTwoValueLabelsClose()?this.mergeLabels():this.splitLabels(),this.inputLeft.getValue()==this.inputLeft.getMax()?this.inputLeft.setZIndex(100):this.inputLeft.setZIndex(2))),this.valueLabelLeft&&this.minLabel&&(this.isLeftValueLabelCloseToMinLabel()?this.minLabel.setOpacity(0):this.minLabel.setOpacity(1),this.isRange||(this.isLeftValueLabelCloseToMaxLabel()?null===(i=this.maxLabel)||void 0===i||i.setOpacity(0):null===(s=this.maxLabel)||void 0===s||s.setOpacity(1))),this.valueLabelLeft&&this.vertical&&this.fixValueLabelPositionForVertical()}setRightValue(t){var e;this.inputRight.setValue(t),this.setThumbRightPosition(t),this.valueLabelRight&&(this.valueLabelRight.setValue(t),null===(e=this.valueLabelCommon)||void 0===e||e.setValue(this.inputLeft.getValue()+" - "+t),this.valueLabelRight.setRightIndent(this.thumbRight.getRightIndent()),this.isTwoValueLabelsClose()?this.mergeLabels():this.splitLabels()),this.valueLabelRight&&this.maxLabel&&(this.isRightValueLabelCloseToMaxLabel()?this.maxLabel.setOpacity(0):this.maxLabel.setOpacity(1)),this.valueLabelRight&&this.vertical&&this.fixValueLabelPositionForVertical()}setThumbLeftPosition(t){let e=parseInt(this.inputLeft.getMin()),i=(t-e)/(parseInt(this.inputLeft.getMax())-e)*100;this.thumbLeft.setLeftIndent(i),this.isRange||this.range.setRightIndent(100-i),this.isRange&&this.range.setLeftIndent(i)}setThumbRightPosition(t){let e=parseInt(this.inputRight.getMin()),i=100-(t-e)/(parseInt(this.inputRight.getMax())-e)*100;this.thumbRight.setRightIndent(i),this.range.setRightIndent(i)}mergeLabels(){var t,e,i,s;null===(t=this.valueLabelLeft)||void 0===t||t.setOpacity(0),null===(e=this.valueLabelRight)||void 0===e||e.setOpacity(0),null===(i=this.valueLabelCommon)||void 0===i||i.setOpacity(1);let n=100-parseInt(this.thumbRight.getRightIndent())-parseInt(this.thumbLeft.getLeftIndent());null===(s=this.valueLabelCommon)||void 0===s||s.setLeftIndent(parseInt(this.valueLabelLeft.getLeftIndent())+n/2+"%")}splitLabels(){var t,e,i;null===(t=this.valueLabelCommon)||void 0===t||t.setOpacity(0),null===(e=this.valueLabelLeft)||void 0===e||e.setOpacity(1),null===(i=this.valueLabelRight)||void 0===i||i.setOpacity(1)}isTwoValueLabelsClose(){if(!this.vertical){let t=this.valueLabelLeft.getBoundingClientRect().right;return this.valueLabelRight.getBoundingClientRect().left-t<3}if(this.vertical)return this.valueLabelLeft.getBoundingClientRect().top-this.valueLabelRight.getBoundingClientRect().bottom<3}fixMinMaxLabelsPositionForVertical(){var t,e;null===(t=this.minLabel)||void 0===t||t.fixPositionForVertical(),null===(e=this.maxLabel)||void 0===e||e.fixPositionForVertical()}fixValueLabelPositionForVertical(){this.valueLabelLeft.fixPositionForVertical(),this.isRange&&(this.valueLabelRight.fixPositionForVertical(),this.valueLabelCommon.fixPositionForVertical())}isLeftValueLabelCloseToMinLabel(){let t,e;return this.vertical?this.vertical?(t=this.valueLabelLeft.getBoundingClientRect().bottom,e=this.minLabel.getBoundingClientRect().top,e-t<3):void 0:(t=this.valueLabelLeft.getBoundingClientRect().left,e=this.minLabel.getBoundingClientRect().right,t-e<3)}isLeftValueLabelCloseToMaxLabel(){let t,e;return this.vertical?this.vertical?(t=this.valueLabelLeft.getBoundingClientRect().top,e=this.maxLabel.getBoundingClientRect().bottom,t-e<3):void 0:(t=this.valueLabelLeft.getBoundingClientRect().right,e=this.maxLabel.getBoundingClientRect().left,e-t<3)}isRightValueLabelCloseToMaxLabel(){let t,e;return this.vertical?this.vertical?(t=this.valueLabelRight.getBoundingClientRect().top,e=this.maxLabel.getBoundingClientRect().bottom,t-e<3):void 0:(t=this.valueLabelRight.getBoundingClientRect().right,e=this.maxLabel.getBoundingClientRect().left,e-t<3)}handleLeftInput(t){var e;null===(e=this.presenter)||void 0===e||e.handleLeftInput(t)}handleRightInput(t){var e;null===(e=this.presenter)||void 0===e||e.handleRightInput(t)}handleInputMouseover(t="left"){"left"==t&&this.thumbLeft.addHover(),"right"==t&&this.thumbRight.addHover()}handleInputMouseout(t="left"){"left"==t&&this.thumbLeft.removeHover(),"right"==t&&this.thumbRight.removeHover()}handleInputMousedown(t="left"){"left"==t&&this.thumbLeft.makeActive(),"right"==t&&this.thumbRight.makeActive()}handleInputMouseup(t="left"){"left"==t&&this.thumbLeft.makeInactive(),"right"==t&&this.thumbRight.makeInactive()}addScale(t,e,i){this.scale=new u(t,e,i),this.scale.registerWith(this),this.component.append(this.scale.component),this.vertical&&this.scale.fixPositionForVertical()}handleScaleClick(t,e){var i,s,n;let a=this.convert小lick小oordsToValue(t,e);this.isRange||(this.addSmoothTransition("left"),null===(i=this.presenter)||void 0===i||i.handleLeftInput(a),setTimeout((()=>{this.removeSmoothTransition("left")}),1e3)),this.isRange&&("left"==this.whichThumbIsNearer(t,e)?(this.addSmoothTransition("left"),null===(s=this.presenter)||void 0===s||s.handleLeftInput(a),setTimeout((()=>{this.removeSmoothTransition("left")}),1e3)):(this.addSmoothTransition("right"),null===(n=this.presenter)||void 0===n||n.handleRightInput(a),setTimeout((()=>{this.removeSmoothTransition("right")}),1e3)))}convert小lick小oordsToValue(t,e){let i=this.track.component.getBoundingClientRect(),s=0;if(!this.vertical){let e=100*(t-i.left)/i.width;s=Math.round(e*(+this.inputLeft.getMax()-+this.inputLeft.getMin())/100+ +this.inputLeft.getMin())}if(this.vertical){let t=100-100*(e-i.top)/i.height;s=Math.round(t*(+this.inputLeft.getMax()-+this.inputLeft.getMin())/100+ +this.inputLeft.getMin())}return s}whichThumbIsNearer(t,e){let i=this.thumbLeft.component.getBoundingClientRect(),s=this.thumbRight.component.getBoundingClientRect(),n=0,a=0;return this.vertical||(n=Math.abs(t-i.right),a=Math.abs(t-s.left)),this.vertical&&(n=Math.abs(e-i.top),a=Math.abs(e-s.bottom)),n<=a?"left":"right"}addSmoothTransition(t="left"){"left"==t&&(this.thumbLeft.component.classList.add("range-slider__thumb_smooth-transition"),this.range.component.classList.add("range-slider__range_smooth-transition"),this.valueLabelLeft&&this.valueLabelLeft.component.classList.add("range-slider__value-label_smooth-transition")),"right"==t&&(this.thumbRight.component.classList.add("range-slider__thumb_smooth-transition"),this.range.component.classList.add("range-slider__range_smooth-transition"),this.valueLabelRight&&this.valueLabelRight.component.classList.add("range-slider__value-label_smooth-transition"))}removeSmoothTransition(t="left"){"left"==t&&(this.thumbLeft.component.classList.remove("range-slider__thumb_smooth-transition"),this.range.component.classList.remove("range-slider__range_smooth-transition"),this.valueLabelLeft&&this.valueLabelLeft.component.classList.remove("range-slider__value-label_smooth-transition")),"right"==t&&(this.thumbRight.component.classList.remove("range-slider__thumb_smooth-transition"),this.range.component.classList.remove("range-slider__range_smooth-transition"),this.valueLabelRight&&this.valueLabelRight.component.classList.remove("range-slider__value-label_smooth-transition"))}}class c{constructor(t,e){this.model=t,this.view=e,e.setMinValue(t.min),e.setMaxValue(t.max),e.setLeftValue(t.leftValue),e.setStep(t.step),this.view.isRange&&e.setRightValue(t.rightValue),this.view.hasScale&&e.addScale(t.min,t.max,e.scaleIntervals)}handleLeftInput(t){this.model.setLeftValue(t),this.view.setLeftValue(this.model.leftValue)}handleRightInput(t){this.model.setRightValue(t),this.view.setRightValue(this.model.rightValue)}}let g=document.querySelectorAll(".js-range-slider");for(let e of g){let i=new t({min:10,max:150}),s=new m(e,{minMaxLabels:!0,valueLabel:!0,scale:!0,scaleIntervals:5}),n=new c(i,s);s.registerWith(n)}})();
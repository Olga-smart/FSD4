(()=>{"use strict";class t{constructor(t={}){this.min=t.min||0,this.max=t.max||150,this.leftValue=t.leftValue||25,this.rightValue=t.rightValue||75,this.step=t.step||1}setLeftValue(t){t<this.min?this.leftValue=this.min:this.leftValue=Math.min(t,this.rightValue)}setRightValue(t){t>this.max?this.rightValue=this.max:this.rightValue=Math.max(t,this.leftValue)}}function e(t,e){const i=document.createElement(t);return e&&(i.className=e),i}class i{constructor(){this.component=e("div","range-slider__slider")}append(...t){this.component.append(...t)}}class s{constructor(){this.component=e("div","range-slider__track")}}class n{constructor(){this.component=e("div","range-slider__range js-range-slider__range")}setLeftIndent(t){this.component.style.left=t+"%"}setRightIndent(t){this.component.style.right=t+"%"}}class a{constructor(t="left"){this.view=null,this.type=t,this.component=e("input",`range-slider__input range-slider__input_${t} js-range-slider__input_${t}`),this.component.type="range",this.attachEventHandlers()}registerWith(t){this.view=t}setMinValue(t){this.component.setAttribute("min",t)}setMaxValue(t){this.component.setAttribute("max",t)}setStep(t){this.component.setAttribute("step",t)}setValue(t){this.component.setAttribute("value",t)}setZIndex(t){this.component.style.zIndex=t}getValue(){return this.component.value}getMin(){return this.component.min}getMax(){return this.component.max}attachEventHandlers(){this.component.addEventListener("input",(()=>{let t=this.component.value;"left"==this.type&&this.view.handleLeftInput(t),"right"==this.type&&this.view.handleRightInput(t)})),this.component.addEventListener("mouseover",(()=>{this.view.handleInputMouseover(this.type)})),this.component.addEventListener("mouseout",(()=>{this.view.handleInputMouseout(this.type)})),this.component.addEventListener("mousedown",(()=>{this.view.handleInputMousedown(this.type)})),this.component.addEventListener("mouseup",(()=>{this.view.handleInputMouseup(this.type)}))}}class l{constructor(t="left"){this.type=t,this.component=e("div",`range-slider__thumb range-slider__thumb_${t} js-range-slider__thumb_${t}`)}addHover(){this.component.classList.add("range-slider__thumb_hover")}removeHover(){this.component.classList.remove("range-slider__thumb_hover")}makeActive(){this.component.classList.add("range-slider__thumb_active")}makeInactive(){this.component.classList.remove("range-slider__thumb_active")}setLeftIndent(t){this.component.style.left=t+"%"}setRightIndent(t){this.component.style.right=t+"%"}getLeftIndent(){return this.component.style.left}getRightIndent(){return this.component.style.right}getBoundingClientRect(){return this.component.getBoundingClientRect()}}class h{constructor(t="left"){this.type=t,this.component=document.createElement("div")}setOpacity(t){this.component.style.opacity=t}setValue(t){this.component.textContent=t}getBoundingClientRect(){return console.log(this.component.getBoundingClientRect()),this.component.getBoundingClientRect()}}class o extends h{constructor(t="left"){super(t),this.component=e("div",`range-slider__min-max-label range-slider__min-max-label_${t} js-range-slider__min-max-label_${t}`)}fixPositionForVertical(){"left"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(-${this.component.offsetWidth}px)`),"right"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(${this.component.offsetHeight}px)`)}}class r extends h{constructor(t="left"){super(t),this.component=e("div",`range-slider__value-label range-slider__value-label_${t} js-range-slider__value-label_${t}`)}setLeftIndent(t){this.component.style.left=t}getLeftIndent(){return this.component.style.left}setRightIndent(t){this.component.style.right=t}getRightIndent(){return this.component.style.right}fixPositionForVertical(){"left"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(${this.component.offsetHeight}px) translateY(${this.component.offsetWidth}px) translateY(-50%)`),"right"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(${this.component.offsetHeight}px) translateY(-50%)`),"common"==this.type&&(this.component.style.transform=`rotate(90deg) translateX(${this.component.offsetHeight}px) translateY(${this.component.offsetWidth}px) translateY(-50%)`)}}class u{constructor(t,e={}){this.presenter=null,this.component=t,this.inputLeft=new a("left"),this.inputLeft.registerWith(this),this.inputRight=new a("right"),this.inputRight.registerWith(this),this.slider=new i,this.track=new s,this.range=new n,this.thumbLeft=new l("left"),this.thumbRight=new l("right"),this.slider.append(this.track.component,this.range.component,this.thumbLeft.component,this.thumbRight.component),this.component.append(this.inputLeft.component,this.inputRight.component,this.slider.component),e.minMaxLabels&&(this.minLabel=new o("left"),this.maxLabel=new o("right"),this.component.append(this.minLabel.component,this.maxLabel.component)),e.valueLabel&&(this.valueLabelLeft=new r("left"),this.valueLabelRight=new r("right"),this.valueLabelCommon=new r("common"),this.component.append(this.valueLabelLeft.component,this.valueLabelRight.component,this.valueLabelCommon.component),setTimeout((()=>{this.isTwoValueLabelsClose()&&this.mergeLabels()}))),e.vertical&&(this.component.classList.add("range-slider_vertical"),this.vertical=!0,e.minMaxLabels&&setTimeout((()=>{this.fixMinMaxLabelsPositionForVertical()})),e.valueLabel&&setTimeout((()=>{this.fixValueLabelPositionForVertical()}))),e.minMaxLabels&&e.valueLabel&&setTimeout((()=>{this.isLeftValueLabelCloseToMinLabel()&&this.minLabel.setOpacity(0),this.isRightValueLabelCloseToMaxLabel()&&this.maxLabel.setOpacity(0)}))}registerWith(t){this.presenter=t}setMinValue(t){this.inputLeft.setMinValue(t),this.inputRight.setMinValue(t),this.minLabel&&this.minLabel.setValue(t)}setMaxValue(t){this.inputLeft.setMaxValue(t),this.inputRight.setMaxValue(t),this.maxLabel&&this.maxLabel.setValue(t)}setStep(t){this.inputLeft.setStep(t),this.inputRight.setStep(t)}setLeftValue(t){this.inputLeft.setValue(t),this.setThumbLeftPosition(t),this.valueLabelLeft&&(this.valueLabelLeft.setValue(t),this.valueLabelCommon.setValue(t+" - "+this.inputRight.getValue()),this.valueLabelLeft.setLeftIndent(this.thumbLeft.getLeftIndent()),this.isTwoValueLabelsClose()?this.mergeLabels():this.splitLabels(),this.inputLeft.getValue()==this.inputLeft.getMax()?this.inputLeft.setZIndex(100):this.inputLeft.setZIndex(2)),this.valueLabelLeft&&this.minLabel&&(this.isLeftValueLabelCloseToMinLabel()?this.minLabel.setOpacity(0):this.minLabel.setOpacity(1)),this.valueLabelLeft&&this.vertical&&this.fixValueLabelPositionForVertical()}setRightValue(t){this.inputRight.setValue(t),this.setThumbRightPosition(t),this.valueLabelRight&&(this.valueLabelRight.setValue(t),this.valueLabelCommon.setValue(this.inputLeft.getValue()+" - "+t),this.valueLabelRight.setRightIndent(this.thumbRight.getRightIndent()),this.isTwoValueLabelsClose()?this.mergeLabels():this.splitLabels()),this.valueLabelRight&&this.maxLabel&&(this.isRightValueLabelCloseToMaxLabel()?this.maxLabel.setOpacity(0):this.maxLabel.setOpacity(1)),this.valueLabelRight&&this.vertical&&this.fixValueLabelPositionForVertical()}setThumbLeftPosition(t){let e=parseInt(this.inputLeft.getMin()),i=(t-e)/(parseInt(this.inputLeft.getMax())-e)*100;this.thumbLeft.setLeftIndent(i),this.range.setLeftIndent(i)}setThumbRightPosition(t){let e=parseInt(this.inputRight.getMin()),i=100-(t-e)/(parseInt(this.inputRight.getMax())-e)*100;this.thumbRight.setRightIndent(i),this.range.setRightIndent(i)}mergeLabels(){this.valueLabelLeft.setOpacity(0),this.valueLabelRight.setOpacity(0),this.valueLabelCommon.setOpacity(1);let t=100-parseInt(this.thumbRight.getRightIndent())-parseInt(this.thumbLeft.getLeftIndent());this.valueLabelCommon.setLeftIndent(parseInt(this.valueLabelLeft.getLeftIndent())+t/2+"%")}splitLabels(){this.valueLabelCommon.setOpacity(0),this.valueLabelLeft.setOpacity(1),this.valueLabelRight.setOpacity(1)}isTwoValueLabelsClose(){if(!this.vertical){let t=this.valueLabelLeft.getBoundingClientRect().right;return this.valueLabelRight.getBoundingClientRect().left-t<3}if(this.vertical)return this.valueLabelLeft.getBoundingClientRect().top-this.valueLabelRight.getBoundingClientRect().bottom<3}fixMinMaxLabelsPositionForVertical(){this.minLabel.fixPositionForVertical(),this.maxLabel.fixPositionForVertical()}fixValueLabelPositionForVertical(){this.valueLabelLeft.fixPositionForVertical(),this.valueLabelRight.fixPositionForVertical(),this.valueLabelCommon.fixPositionForVertical()}isLeftValueLabelCloseToMinLabel(){let t,e;return this.vertical?this.vertical?(t=this.valueLabelLeft.getBoundingClientRect().bottom,e=this.minLabel.getBoundingClientRect().top,e-t<3):void 0:(t=this.valueLabelLeft.getBoundingClientRect().left,e=this.minLabel.getBoundingClientRect().right,t-e<3)}isRightValueLabelCloseToMaxLabel(){let t,e;return this.vertical?this.vertical?(t=this.valueLabelRight.getBoundingClientRect().top,e=this.maxLabel.getBoundingClientRect().bottom,t-e<3):void 0:(t=this.valueLabelRight.getBoundingClientRect().right,e=this.maxLabel.getBoundingClientRect().left,e-t<3)}handleLeftInput(t){this.presenter.handleLeftInput(t)}handleRightInput(t){this.presenter.handleRightInput(t)}handleInputMouseover(t="left"){"left"==t&&this.thumbLeft.addHover(),"right"==t&&this.thumbRight.addHover()}handleInputMouseout(t="left"){"left"==t&&this.thumbLeft.removeHover(),"right"==t&&this.thumbRight.removeHover()}handleInputMousedown(t="left"){"left"==t&&this.thumbLeft.makeActive(),"right"==t&&this.thumbRight.makeActive()}handleInputMouseup(t="left"){"left"==t&&this.thumbLeft.makeInactive(),"right"==t&&this.thumbRight.makeInactive()}}class m{constructor(t,e){this.model=t,this.view=e,e.setMinValue(t.min),e.setMaxValue(t.max),e.setLeftValue(t.leftValue),e.setRightValue(t.rightValue),e.setStep(t.step)}handleLeftInput(t){this.model.setLeftValue(t),this.view.setLeftValue(this.model.leftValue)}handleRightInput(t){this.model.setRightValue(t),this.view.setRightValue(this.model.rightValue)}}let p=document.querySelectorAll(".js-range-slider");for(let e of p){let i=new t({min:0,max:150}),s=new u(e,{minMaxLabels:!0,valueLabel:!0,vertical:!1}),n=new m(i,s);s.registerWith(n)}})();
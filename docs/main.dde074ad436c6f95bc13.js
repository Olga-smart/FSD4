(()=>{"use strict";class t{constructor(t={}){this.min=t.min||0,this.max=t.max||150,this.leftValue=t.leftValue||25,this.rightValue=t.rightValue||75,this.step=t.step||1}setLeftValue(t){t<this.min?this.leftValue=this.min:this.leftValue=Math.min(t,this.rightValue)}setRightValue(t){t>this.max?this.rightValue=this.max:this.rightValue=Math.max(t,this.leftValue)}}class e{constructor(t,e={}){this.presenter=null,this.component=t,this.inputLeft=this.createElement("input","range-slider__input range-slider__input_left js-range-slider__input_left"),this.inputLeft.type="range",this.inputRight=this.createElement("input","range-slider__input range-slider__input_right js-range-slider__input_right"),this.inputRight.type="range",this.slider=this.createElement("div","range-slider__slider"),this.track=this.createElement("div","range-slider__track"),this.range=this.createElement("div","range-slider__range js-range-slider__range"),this.thumbLeft=this.createElement("div","range-slider__thumb range-slider__thumb_left js-range-slider__thumb_left"),this.thumbRight=this.createElement("div","range-slider__thumb range-slider__thumb_right js-range-slider__thumb_right"),this.slider.append(this.track,this.range,this.thumbLeft,this.thumbRight),this.component.append(this.inputLeft,this.inputRight,this.slider),e.minMaxLabels&&(this.minLabel=this.createElement("div","range-slider__min-max-label range-slider__min-max-label_left js-range-slider__min-max-label_left"),this.maxLabel=this.createElement("div","range-slider__min-max-label range-slider__min-max-label_right js-range-slider__min-max-label_right"),this.component.append(this.minLabel,this.maxLabel)),e.valueLabel&&(this.valueLabelLeft=this.createElement("div","range-slider__value-label range-slider__value-label_left js-range-slider__value-label_left"),this.valueLabelRight=this.createElement("div","range-slider__value-label range-slider__value-label_right js-range-slider__value-label_right"),this.valueLabelCommon=this.createElement("div","range-slider__value-label range-slider__value-label_common js-range-slider__value-label_common"),this.component.append(this.valueLabelLeft,this.valueLabelRight,this.valueLabelCommon),setTimeout((()=>{this.isTwoValueLabelsClose()&&this.mergeLabels()}))),e.vertical&&(this.component.classList.add("range-slider_vertical"),this.vertical=!0,e.minMaxLabels&&setTimeout((()=>{this.fixMinMaxLabelsPositionForVertical()})),e.valueLabel&&setTimeout((()=>{this.fixValueLabelPositionForVertical()}))),e.minMaxLabels&&e.valueLabel&&setTimeout((()=>{this.isLeftValueLabelCloseToMinLabel()&&(this.minLabel.style.opacity=0),this.isRightValueLabelCloseToMaxLabel()&&(this.maxLabel.style.opacity=0)})),this.attachEventHandlers()}registerWith(t){this.presenter=t}createElement(t,e){const i=document.createElement(t);return e&&(i.className=e),i}setMinValue(t){this.inputLeft.setAttribute("min",t),this.inputRight.setAttribute("min",t),this.minLabel&&(this.minLabel.textContent=t)}setMaxValue(t){this.inputLeft.setAttribute("max",t),this.inputRight.setAttribute("max",t),this.maxLabel&&(this.maxLabel.textContent=t)}setStep(t){this.inputLeft.setAttribute("step",t),this.inputRight.setAttribute("step",t)}setLeftValue(t){this.inputLeft.setAttribute("value",t),this.setThumbLeftPosition(t),this.valueLabelLeft&&(this.valueLabelLeft.textContent=t,this.valueLabelCommon.textContent=t+" - "+this.inputRight.value,this.setValueLabelLeftPosition(),this.isTwoValueLabelsClose()?this.mergeLabels():this.splitLabels(),this.inputLeft.value==this.inputLeft.max?this.inputLeft.style.zIndex=100:this.inputLeft.style.zIndex=2),this.valueLabelLeft&&this.minLabel&&(this.isLeftValueLabelCloseToMinLabel()?this.minLabel.style.opacity=0:this.minLabel.style.opacity=1),this.valueLabelLeft&&this.vertical&&this.fixValueLabelPositionForVertical()}setRightValue(t){this.inputRight.setAttribute("value",t),this.setThumbRightPosition(t),this.valueLabelRight&&(this.valueLabelRight.textContent=t,this.valueLabelCommon.textContent=this.inputLeft.value+" - "+t,this.setValueLabelRightPosition(),this.isTwoValueLabelsClose()?this.mergeLabels():this.splitLabels()),this.valueLabelRight&&this.maxLabel&&(this.isRightValueLabelCloseToMaxLabel()?this.maxLabel.style.opacity=0:this.maxLabel.style.opacity=1),this.valueLabelRight&&this.vertical&&this.fixValueLabelPositionForVertical()}setThumbLeftPosition(t){let e=parseInt(this.inputLeft.min),i=(t-e)/(parseInt(this.inputLeft.max)-e)*100;this.thumbLeft.style.left=i+"%",this.range.style.left=i+"%"}setThumbRightPosition(t){let e=parseInt(this.inputRight.min),i=(t-e)/(parseInt(this.inputRight.max)-e)*100;this.thumbRight.style.right=100-i+"%",this.range.style.right=100-i+"%"}setValueLabelLeftPosition(){this.valueLabelLeft.style.left=this.thumbLeft.style.left}setValueLabelRightPosition(){this.valueLabelRight.style.right=this.thumbRight.style.right}mergeLabels(){this.valueLabelLeft.style.opacity=0,this.valueLabelRight.style.opacity=0,this.valueLabelCommon.style.opacity=1,this.thumbRight.getBoundingClientRect().left,this.thumbLeft.getBoundingClientRect().right;let t=100-parseInt(this.thumbRight.style.right)-parseInt(this.thumbLeft.style.left);this.valueLabelCommon.style.left=parseInt(this.valueLabelLeft.style.left)+t/2+"%"}splitLabels(){this.valueLabelCommon.style.opacity=0,this.valueLabelLeft.style.opacity=1,this.valueLabelRight.style.opacity=1}isTwoValueLabelsClose(){if(!this.vertical){let t=this.valueLabelLeft.getBoundingClientRect().right;return this.valueLabelRight.getBoundingClientRect().left-t<3}if(this.vertical)return this.valueLabelLeft.getBoundingClientRect().top-this.valueLabelRight.getBoundingClientRect().bottom<3}fixMinMaxLabelsPositionForVertical(){this.maxLabel.style.transform=`rotate(90deg) translateX(${this.maxLabel.offsetHeight}px)`,this.minLabel.style.transform=`rotate(90deg) translateX(-${this.minLabel.offsetWidth}px)`}fixValueLabelPositionForVertical(){this.valueLabelLeft.style.transform=`rotate(90deg) translateX(${this.valueLabelLeft.offsetHeight}px) translateY(${this.valueLabelLeft.offsetWidth}px) translateY(-50%)`,this.valueLabelRight.style.transform=`rotate(90deg) translateX(${this.valueLabelRight.offsetHeight}px) translateY(-50%)`,this.valueLabelCommon.style.transform=`rotate(90deg) translateX(${this.valueLabelCommon.offsetHeight}px) translateY(${this.valueLabelCommon.offsetWidth}px) translateY(-50%)`}isLeftValueLabelCloseToMinLabel(){let t,e;return this.vertical?this.vertical?(t=this.valueLabelLeft.getBoundingClientRect().bottom,e=this.minLabel.getBoundingClientRect().top,e-t<3):void 0:(t=this.valueLabelLeft.getBoundingClientRect().left,e=this.minLabel.getBoundingClientRect().right,t-e<3)}isRightValueLabelCloseToMaxLabel(){let t,e;return this.vertical?this.vertical?(t=this.valueLabelRight.getBoundingClientRect().top,e=this.maxLabel.getBoundingClientRect().bottom,t-e<3):void 0:(t=this.valueLabelRight.getBoundingClientRect().right,e=this.maxLabel.getBoundingClientRect().left,e-t<3)}attachEventHandlers(){this.inputLeft.addEventListener("input",(()=>{let t=this.inputLeft.value;this.presenter.handleLeftInput(t)})),this.inputRight.addEventListener("input",(()=>{let t=this.inputRight.value;this.presenter.handleRightInput(t)})),this.inputLeft.addEventListener("mouseover",(()=>{this.thumbLeft.classList.add("range-slider__thumb_hover")})),this.inputLeft.addEventListener("mouseout",(()=>{this.thumbLeft.classList.remove("range-slider__thumb_hover")})),this.inputLeft.addEventListener("mousedown",(()=>{this.thumbLeft.classList.add("range-slider__thumb_active")})),this.inputLeft.addEventListener("mouseup",(()=>{this.thumbLeft.classList.remove("range-slider__thumb_active")})),this.inputRight.addEventListener("mouseover",(()=>{this.thumbRight.classList.add("range-slider__thumb_hover")})),this.inputRight.addEventListener("mouseout",(()=>{this.thumbRight.classList.remove("range-slider__thumb_hover")})),this.inputRight.addEventListener("mousedown",(()=>{this.thumbRight.classList.add("range-slider__thumb_active")})),this.inputRight.addEventListener("mouseup",(()=>{this.thumbRight.classList.remove("range-slider__thumb_active")}))}}class i{constructor(t,e){this.model=t,this.view=e,e.setMinValue(t.min),e.setMaxValue(t.max),e.setLeftValue(t.leftValue),e.setRightValue(t.rightValue),e.setStep(t.step)}handleLeftInput(t){this.model.setLeftValue(t),this.view.setLeftValue(this.model.leftValue)}handleRightInput(t){this.model.setRightValue(t),this.view.setRightValue(this.model.rightValue)}}let s=document.querySelectorAll(".js-range-slider");for(let l of s){let s=new t({min:0,max:150}),a=new e(l,{minMaxLabels:!0,valueLabel:!0,vertical:!1}),h=new i(s,a);a.registerWith(h)}})();